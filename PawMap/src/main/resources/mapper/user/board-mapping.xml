<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.pawmap.mapper.BoardMapper">
<!--   	<resultMap type="com.cos.blog.vo.BoardVO" id="boardResult">
  		<id property="id" column="id"/>
  		<result property="title" column="title"/>
  		<result property="content" column="content"/>
  		<result property="count" column="count"/>
  		<result property="userId" column="userId"/>
  	</resultMap> -->
  	
<!--   	<select id="selectTest" resultType="com.cos.blog.vo.BoardVO">
  		SELECT * FROM BOARD WHERE id=#{id}
  	</select> -->
  	
  	<insert id="insertBoard">
  		INSERT INTO board(board_seq, board_type, user_id, title, hospital_seq, content, regDate) VALUES(
  				(SELECT IFNULL(MAX(BOARD_SEQ),0) + 1 FROM BOARD A WHERE BOARD_TYPE = #{boardType}),
  				#{boardType},
  				#{userId},
  				#{title},
  				#{hospitalSeq},
  				#{content},
  				NOW()
  		)
  	</insert>
  	
  		<!-- 글 수정 -->
  	<update id="updateBoard">
		UPDATE BOARD
			SET 
				title = #{title}
			  , content = #{content}
			WHERE board_seq = #{boardSeq}
	</update>
	
	  <!-- 글 삭제 -->
	<delete id="deleteBoard">
		DELETE FROM BOARD
			WHERE board_seq = #{boardSeq}
	</delete>
  	
  	
  		<!-- 자유게시판 리스트 -->
  		<select id="getFreeBoardList" resultType="com.pawmap.VO.BoardVO">
		SELECT * FROM BOARD
		WHERE board_type = "f"
		<!-- 최신글이 위로 오게 하는 쿼리 -->
		order by board_seq DESC
		
	</select>
	
	
		<!-- 나눔게시판 리스트 -->
	  	<select id="getNanumBoardList" resultType="com.pawmap.VO.BoardVO">
		SELECT * FROM BOARD
		WHERE board_type = "s"
		<!-- 최신글이 위로 오게 하는 쿼리 -->
		order by board_seq DESC
		
	</select>
	
	
	<!-- 자유게시판 - f -->
	<!-- 맵퍼의 메소드명이랑 반드시 일치시키기 -->
	<!-- id는 중복되면 안됨 -->
		<select id="getBoardDetail" resultType="com.pawmap.VO.BoardVO">
		SELECT * FROM BOARD
		WHERE board_seq = #{boardSeq}
		and board_type = #{boardType}
	</select>
	

	
  </mapper>	
  
  
  
  